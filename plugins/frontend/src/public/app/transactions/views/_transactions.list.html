<div data-ng-controller="transactions.listCtrl as transactionsList">

	<form>
		<div class="form-group">
			<div class="input-group">
				<div class="input-group-addon"><i class="fa fa-search"></i></div>
				<input type="text" class="form-control" data-ng-model="transactionsList.query" placeholder="Search transactions">
			</div>
		</div>
	</form>

	<div>
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th style="width:9em;">
						<span class="sr-only">Controls</span>
					</th>
					<th>
						<a href="#" data-ng-click="transactionsList.sortType = 'date'; transactionsList.sortReverse = !transactionsList.sortReverse">
							<span>Date</span>
							<span data-ng-show="transactionsList.sortType == 'date' && !transactionsList.sortReverse" class="fa fa-caret-down"></span>
							<span data-ng-show="transactionsList.sortType == 'date' && transactionsList.sortReverse" class="fa fa-caret-up"></span>
						</a>
					</th>
					<th>
						<a href="#" data-ng-click="transactionsList.sortType = 'description'; transactionsList.sortReverse = !transactionsList.sortReverse">
							<span>Description</span>
							<span data-ng-show="transactionsList.sortType == 'description' && !transactionsList.sortReverse" class="fa fa-caret-down"></span>
							<span data-ng-show="transactionsList.sortType == 'description' && transactionsList.sortReverse" class="fa fa-caret-up"></span>
						</a>
					</th>
					<th class="hidden-xs">
						<a href="#" data-ng-click="transactionsList.sortType = 'account'; transactionsList.sortReverse = !transactionsList.sortReverse">
							<span>Account</span>
							<span data-ng-show="transactionsList.sortType == 'account' && !transactionsList.sortReverse" class="fa fa-caret-down"></span>
							<span data-ng-show="transactionsList.sortType == 'account' && transactionsList.sortReverse" class="fa fa-caret-up"></span>
						</a>
					</th>
					<th class="hidden-xs">
						<a href="#" data-ng-click="transactionsList.sortType = 'amount'; transactionsList.sortReverse = !transactionsList.sortReverse">
							<span class="pull-right">
								<span>Debit</span>
								<span data-ng-show="transactionsList.sortType == 'amount' && !transactionsList.sortReverse" class="fa fa-caret-down"></span>
								<span data-ng-show="transactionsList.sortType == 'amount' && transactionsList.sortReverse" class="fa fa-caret-up"></span>
							</span>
						</a>
					</th>
					<th class="hidden-xs">
						<a href="#" data-ng-click="transactionsList.sortType = 'amount'; transactionsList.sortReverse = !transactionsList.sortReverse">
							<span class="pull-right">
								<span>Credit</span>
								<span data-ng-show="transactionsList.sortType == 'amount' && !transactionsList.sortReverse" class="fa fa-caret-down"></span>
								<span data-ng-show="transactionsList.sortType == 'amount' && transactionsList.sortReverse" class="fa fa-caret-up"></span>
							</span>
						</a>
					</th>
					<th class="hidden-sm hidden-md hidden-lg">
						<a href="#" data-ng-click="transactionsList.sortType = 'amount'; transactionsList.sortReverse = !transactionsList.sortReverse">
							<span class="pull-right">
								<span>Amount</span>
								<span data-ng-show="transactionsList.sortType == 'amount' && !transactionsList.sortReverse" class="fa fa-caret-down"></span>
								<span data-ng-show="transactionsList.sortType == 'amount' && transactionsList.sortReverse" class="fa fa-caret-up"></span>
							</span>
						</a>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr data-ng-show="transactionsList.wait">
					<td colspan="0" class="text-center" style="vertical-align:middle;">
						<i class="fa fa-spinner fa-pulse fa-3x"></i>
					</td>
				</tr>
				<tr data-ng-if="!transactionsList.wait && transactionsList.list.length === 0">
					<td colspan="0" class="text-center">
						<span>No transaction</span>
					</td>
				</tr>
				<tr data-ng-repeat="transaction in transactionsList.list | orderBy:transactionsList.sortType:transactionsList.sortReverse | filter:transactionsList.query">
					<td>
						<div class="btn-group btn-group-sm">
							<a data-ui-sref="^.update({transactionId: transaction.id })" class="btn btn-default" role="button"><i class="fa fa-edit"></i><span class="sr-only">Update</span></a>
							<a data-ui-sref="^.duplicate({transactionId: transaction.id })" class="btn btn-default" role="button"><i class="fa fa-files-o"></i><span class="sr-only">Duplicate</span></a>
							<a data-ui-sref="^.delete({transactionId: transaction.id })" class="btn btn-danger" role="button"><i class="fa fa-remove"></i><span class="sr-only">Delete</span></a>
						</div>
					</td>
					<td style="vertical-align:middle;">
						<span class="visible-xs-inline">
							{{ transaction.date | date:'dd/MM/yy' }}
						</span>
						<span class="hidden-xs">
							{{ transaction.date | date:'dd/MM/yyyy' }}
						</span>
					</td>
					<td style="vertical-align:middle;">
						<span>{{ transaction.description }}</span>
					</td>
					<td class="hidden-xs" style="vertical-align:middle;">
						<a data-ng-show="transaction.account.id" data-ui-sref="^.list({ accountId: transaction.account.id })">
							{{ transaction.account.name }}
						</a>
						<span data-ng-show="!transaction.account.id">
							{{ transaction.account.name }}
						</span>
					</td>
					<td class="hidden-xs" style="vertical-align:middle;">
						<span class="pull-right" data-ng-bind-html="transaction.debit | AmountFormat:transactionsList.debitFormatOptions"></span>
					</td>
					<td class="hidden-xs" style="vertical-align:middle;">
						<span class="pull-right" data-ng-bind-html="transaction.credit | AmountFormat:transactionsList.creditFormatOptions"></span>
					</td>
					<td class="hidden-sm hidden-md hidden-lg" style="vertical-align:middle;">
						<span class="pull-right" data-ng-bind-html="transaction.amount | AmountFormat:transactionsList.amountFormatOptions"></span>
					</td>
				</tr>
			</tbody>
		</table>
	</div>

	<a data-ui-sref="^.create" class="btn btn-primary" role="button">Create a new transaction</a>

</div>
